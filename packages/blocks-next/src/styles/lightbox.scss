.sc-lightbox-container {
	position: relative;
	display: flex;
	flex-direction: column;

	img {
		cursor: zoom-in;
	}

	img:hover + button.lightbox-trigger {
		opacity: 1;
	}

	button.lightbox-trigger {
		opacity: 0;
		border: none;
		background-color: rgb(90 90 90 / 25%);
		color: #fff;
		fill: #fff;
		backdrop-filter: blur(16px) saturate(180%);
		cursor: zoom-in;
		display: flex;
		justify-content: center;
		align-items: center;
		width: 20px;
		height: 20px;
		position: absolute;
		z-index: 100;
		top: 16px;
		right: 16px;
		text-align: center;
		padding: 0;
		border-radius: 4px;
		transition: opacity 0.2s ease;

		&:focus-visible {
			outline: 3px auto rgb(90 90 90 / 25%);
			outline: 3px auto -webkit-focus-ring-color;
			outline-offset: 3px;
		}

		&:hover {
			cursor: pointer;
			opacity: 1;
		}

		&:focus {
			opacity: 1;
		}

		&:hover,
		&:focus,
		&:not(:hover):not(:active):not(.has-background) {
			background-color: rgb(90 90 90 / 25%);
			padding: 2px;
			border: none;
		}
	}
}

.sc-lightbox-overlay {
	position: fixed;
	top: 0;
	left: 0;
	z-index: 100000;
	overflow: hidden;
	width: 100%;
	height: 100vh;
	box-sizing: border-box;
	visibility: hidden;
	cursor: zoom-out;

	.sc-lightbox-close-button {
		position: absolute;
		top: calc(
			env(safe-area-inset-top) + 16px
		); // equivalent to $grid-unit-20
		right: calc(
			env(safe-area-inset-right) + 16px
		); // equivalent to $grid-unit-20
		padding: 0;
		cursor: pointer;
		z-index: 5000000;
		min-width: 40px;
		min-height: 40px;
		display: flex;
		align-items: center;
		justify-content: center;
		box-shadow: none;

		&:hover,
		&:focus,
		&:not(:hover):not(:active):not(.has-background) {
			background: none;
			border: none;
		}
	}

	.sc-lightbox-prev-button,
	.sc-lightbox-next-button {
		display: none;
		position: absolute;
		top: 50%;
		transform: translateY(-50%);
		padding: 0;
		cursor: pointer;
		z-index: 5000000;
		min-width: 40px; // equivalent to $button-size-next-default-40px
		min-height: 40px; // equivalent to $button-size-next-default-40px;
		align-items: center;
		justify-content: center;
		box-shadow: none;

		&[hidden] {
			display: none;
		}

		&[aria-disabled="true"] {
			opacity: 0.3;
		}

		&:hover,
		&:focus,
		&:not(:hover):not(:active):not(.has-background) {
			background: none;
			border: none;
		}

		@media (min-width: 480px) {
			display: flex;
		}
	}

	.sc-lightbox-prev-button {
		left: calc(
			env(safe-area-inset-left) + 16px
		); // equivalent to $grid-unit-20
	}

	.sc-lightbox-next-button {
		right: calc(
			env(safe-area-inset-right) + 16px
		); // equivalent to $grid-unit-20
	}

	.sc-lightbox-image-container {
		position: absolute;
		overflow: hidden;
		top: 50%;
		left: 50%;
		transform-origin: top left;
		transform: translate(-50%, -50%);
		width: var(--sc-lightbox--container-width);
		height: var(--sc-lightbox--container-height);
		z-index: 9999999999;
	}

	figure {
		position: relative;
		transform-origin: 0 0;
		display: flex;
		width: 100%;
		height: 100%;
		justify-content: center;
		align-items: center;
		box-sizing: border-box;
		z-index: 3000000;
		margin: 0;

		img {
			min-width: var(--sc-lightbox--image-width);
			min-height: var(--sc-lightbox--image-height);
			width: var(--sc-lightbox--image-width);
			height: var(--sc-lightbox--image-height);
		}

		figcaption {
			display: none;
		}
	}

	button {
		border: none;
		background: none;
	}

	.scrim {
		width: 100%;
		height: 100%;
		position: absolute;
		z-index: 2000000;
		background-color: rgb(255, 255, 255);
		opacity: 0.9;
	}

	// When fading, make the image come in slightly slower
	// or faster than the scrim to give a sense of depth.
	&.active {
		visibility: visible;
		animation: both turn-on-visibility 0.25s;
		img {
			animation: both turn-on-visibility 0.35s;
		}
	}
	&.show-closing-animation {
		&:not(.active) {
			animation: both turn-off-visibility 0.35s;
			img {
				animation: both turn-off-visibility 0.25s;
			}
		}
	}

	@media (prefers-reduced-motion: no-preference) {
		&.zoom {
			&.active {
				opacity: 1;
				visibility: visible;
				animation: none;
				.sc-lightbox-image-container {
					animation: lightbox-zoom-in 0.4s;
					// Override fade animation for image
					img {
						animation: none;
					}
				}
				.scrim {
					animation: turn-on-visibility 0.4s forwards;
				}
			}
			&.show-closing-animation {
				&:not(.active) {
					animation: none;
					.sc-lightbox-image-container {
						animation: lightbox-zoom-out 0.4s;
						// Override fade animation for image
						img {
							animation: none;
						}
					}
					.scrim {
						animation: turn-off-visibility 0.4s forwards;
					}
				}
			}
		}
	}
}

@keyframes show-content-image {
	0% {
		visibility: hidden;
	}
	99% {
		visibility: hidden;
	}
	100% {
		visibility: visible;
	}
}

@keyframes turn-on-visibility {
	0% {
		opacity: 0;
	}
	100% {
		opacity: 1;
	}
}

@keyframes turn-off-visibility {
	0% {
		opacity: 1;
		visibility: visible;
	}
	99% {
		opacity: 0;
		visibility: visible;
	}
	100% {
		opacity: 0;
		visibility: hidden;
	}
}

@keyframes lightbox-zoom-in {
	0% {
		transform: translate(
				calc(
					(-100vw + var(--sc-lightbox--scrollbar-width)) / 2 +
						var(--sc-lightbox--initial-left-position)
				),
				calc(-50vh + var(--sc-lightbox--initial-top-position))
			)
			scale(var(--sc-lightbox--scale));
	}
	100% {
		transform: translate(-50%, -50%) scale(1, 1);
	}
}

@keyframes lightbox-zoom-out {
	0% {
		visibility: visible;
		transform: translate(-50%, -50%) scale(1, 1);
	}
	99% {
		visibility: visible;
	}
	100% {
		visibility: hidden;
		transform: translate(
				calc(
					(-100vw + var(--sc-lightbox--scrollbar-width)) / 2 +
						var(--sc-lightbox--initial-left-position)
				),
				calc(-50vh + var(--sc-lightbox--initial-top-position))
			)
			scale(var(--sc-lightbox--scale));
	}
}
