:root {
	--sc-sticky-purchase-background-color: var(--sc-color-white);
	--sc-sticky-purchase-text-color: var(--sc-color-gray-700);
	--sc-sticky-purchase-scratch-amount: var(--sc-color-gray-500);
}

.surecart-theme-dark {
	--sc-sticky-purchase-background-color: var(--sc-color-black);
	--sc-sticky-purchase-text-color: var(--sc-color-gray-200);
	--sc-sticky-purchase-scratch-amount: var(--sc-color-gray-400);
}

.wp-block-surecart-sticky-purchase.sc-sticky-purchase {
	position: fixed;
	padding: 1.5%;
	left: 50%;
	transform: translateX(-50%);
	opacity: 0;
	z-index: 100;
	bottom: -100%;
	border: solid
		var(--sc-sticky-purchase-border-width, var(--sc-input-border-width))
		var(--sc-sticky-purchase-border-color, var(--sc-input-border-color));
	border-radius: var(
		--sc-sticky-purchase-border-radius,
		var(--sc-input-border-radius-large)
	);
	background-color: var(--sc-sticky-purchase-background-color);
	color: var(--sc-sticky-purchase-text-color);
	max-width: calc(100vw - 2rem);
	width: var(--sc-sticky-purchase-width, 600px);
	pointer-events: none;
	visibility: hidden;
	transition: opacity var(--sc-transition-fast) cubic-bezier(0.4, 0, 0.2, 1),
		bottom var(--sc-transition-fast) cubic-bezier(0.4, 0, 0.2, 1),
		visibility var(--sc-transition-fast) cubic-bezier(0.4, 0, 0.2, 1);

	.sc-sticky-purchase__content {
		width: 100%;
		max-width: 100vw;

		> :last-child {
			margin-bottom: 0;
		}
	}

	&.is-visible {
		opacity: 1;
		bottom: 1%;
		pointer-events: auto;
		visibility: visible;
	}

	.wp-block-surecart-product-buy-button {
		min-width: max-content;
	}

	.wp-block-surecart-product-selected-variant-image {
		margin-bottom: 0;
		flex-shrink: 0;
		width: 80px; // default image width.
		height: 80px; // default image height.
	}

	@media (max-width: 400px) {
		.wp-block-surecart-product-selected-variant-image {
			display: none;
		}
	}

	.wp-block-surecart-product-selected-price-scratch-amount {
		color: var(--sc-sticky-purchase-scratch-amount);
	}

	.wp-block-surecart-product-title {
		color: var(--sc-sticky-purchase-text-color);
		display: -webkit-box;
		-webkit-line-clamp: 2;
		line-clamp: 2;
		-webkit-box-orient: vertical;
		overflow: hidden;
		text-overflow: ellipsis;
	}

	// Compatibility for some theme builders.
	.wp-block-group-is-layout-flex:has(
			> .wp-block-surecart-product-selected-variant-image
		) {
		gap: var(--sc-spacing-large);
	}

	/** Fix for if themes dequeue default wordpress global styles */
	.is-vertically-aligned-center {
		align-items: center;
	}
}

.wp-block-surecart-sticky-purchase.sc-sticky-purchase:has(
		.sc-sticky-purchase__content__unavailable
	) {
	opacity: 0;
	bottom: -100%;
	pointer-events: none;
	visibility: hidden;
}
